import{c as x,r as y,j as l,M as b,s as k}from"./index-DVXwI_y8.js";import{u as T}from"./useQuery-CcmjiuQ2.js";import{u as h}from"./useInfiniteQuery-CRXj1fr8.js";import{T as _}from"./track-item-CtzFit2U.js";import{u as M}from"./usePlaySong-Bi_xQp_B.js";import{B as P}from"./better-virtual-screen-Dt27MRQ2.js";import{Q as g}from"./query-enum-CKM-M8gy.js";import"./context-menu-CSBCy0iF.js";import"./smart-marquee-CiG95ogH.js";import"./use-saved-playlists-DkwmCiDb.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]],A=x("disc-3",S),d=1/0;function E(n,u="US"){const{data:r,isLoading:o}=T({queryKey:[g.album.GET,n],queryFn:()=>k.albums.get(n,u),staleTime:d}),{data:c=[],hasNextPage:s,fetchNextPage:i}=h({queryKey:[g.album.TRACKS,n],initialPageParam:50,queryFn:({pageParam:e})=>k.albums.tracks(n,"US",50,e),getNextPageParam:e=>e.next?e.offset+50:void 0,enabled:r!==void 0&&r.tracks.next!==null,select:e=>e.pages.flatMap(t=>t.items),staleTime:d});return{tracks:y.useMemo(()=>[...r?r.tracks.items:[],...c].reduce((t,a)=>{const{disc_number:f=1}=a;return t[f-1]||t.push([]),t[f-1].push(a),t},[]),[r,c]).flatMap((e,t,a)=>a.length===1?e:[t,...e]),isLoading:o,albumData:r,fetchNextPage:i,hasNextPage:s}}function I(n){const{id:u}=n,r=M(),{tracks:o,isLoading:c,albumData:s,hasNextPage:i,fetchNextPage:m}=E(u),p=e=>{const{linked_from:t,uri:a}=e;s&&r({track:{...e,album:{...s,album_group:""},external_ids:{upc:"",ean:"",isrc:""},popularity:0},contextUri:s.uri,offset:t?t.uri:a})};return l.jsx(P,{loaded:o.length,loading:c,fetchNextPage:m,hasNextPage:i,children:({index:e,style:t})=>{const a=o[e];return typeof a=="number"?l.jsxs(b,{style:t,className:"pointer-events-none justify-start gap-2",icon:A,children:["Disc ",a+1]}):l.jsx(_,{track:{...a,...s?{album:{...s,album_group:""}}:{}},style:t,onClick:()=>p(a),showGoToAlbum:!1})}})}const R=y.memo(I);export{R as default};
