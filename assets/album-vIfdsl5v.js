import{c as y,r as d,j as m,M as x,Q as k,s as g}from"./index-DQnMSIcK.js";import{u as h}from"./useQuery-BNxEzC8E.js";import{u as b}from"./useInfiniteQuery-CtinPyRg.js";import{T}from"./track-item-DZuGSOSH.js";import{u as P}from"./usePlaySong-ArkRxLgP.js";import{B as S}from"./better-virtual-screen-lrF56f2G.js";import"./useBaseQuery-C0PbdfXh.js";import"./context-menu-CMZrgora.js";import"./smart-marquee-D67-oK9N.js";import"./screen-BV_CBvZc.js";import"./use-saved-playlists-Bo-gZheG.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]],N=y("disc-3",M);function j(s,u="US"){const{data:a,isLoading:n}=h({queryKey:[k.album.GET,s],queryFn:()=>g.albums.get(s,u)}),{data:c=[],hasNextPage:o,fetchNextPage:i}=b({queryKey:[k.album.TRACKS,s],initialPageParam:50,queryFn:({pageParam:t})=>g.albums.tracks(s,"US",50,t),getNextPageParam:t=>t.next?t.offset+50:void 0,enabled:a!==void 0&&a.tracks.next!==null,select:t=>t.pages.flatMap(e=>e.items)});return{tracks:d.useMemo(()=>[...a?a.tracks.items:[],...c].reduce((e,r)=>{const{disc_number:f=1}=r;return e[f-1]||e.push([]),e[f-1].push(r),e},[]),[a,c]).flatMap((t,e,r)=>r.length===1?t:[e,...t]),isLoading:n,albumData:a,fetchNextPage:i,hasNextPage:o}}function _(s){const{id:u}=s,a=P(),{tracks:n,isLoading:c,albumData:o,hasNextPage:i,fetchNextPage:l}=j(u),p=t=>{const{linked_from:e,uri:r}=t;o&&a({contextUri:o.uri,offset:e?e.uri:r})};return m.jsx(S,{loaded:n.length,loading:c,fetchNextPage:l,hasNextPage:i,children:({index:t,style:e})=>{const r=n[t];return typeof r=="number"?m.jsxs(x,{style:e,className:"pointer-events-none justify-start gap-2",icon:N,children:["Disc ",r+1]}):m.jsx(T,{track:{...r,...o?{album:{...o,album_group:""}}:{}},style:e,onClick:()=>p(r),showGoToAlbum:!1})}})}const B=d.memo(_);export{B as default};
