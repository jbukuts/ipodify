import{r as m,j as e,a as p,Q as y,s as S}from"./index-DQnMSIcK.js";import{u as G}from"./useQuery-BNxEzC8E.js";import{u as L}from"./useInfiniteQuery-CtinPyRg.js";import{S as A}from"./screen-BV_CBvZc.js";import{T as V}from"./track-item-DZuGSOSH.js";import{u as D}from"./usePlaySong-ArkRxLgP.js";import{u as $,a as K,c as B,P as g,b as h}from"./smart-marquee-D67-oK9N.js";import{u as U,c as C,R as q,I as z,P as Q}from"./context-menu-CMZrgora.js";import{A as O}from"./album-item-DpslhPUZ.js";import{B as Y}from"./better-virtual-screen-lrF56f2G.js";import"./useBaseQuery-C0PbdfXh.js";import"./use-saved-playlists-Bo-gZheG.js";import"./volume-DwkCYnC_.js";var x="Tabs",[H,Te]=B(x,[C]),N=C(),[J,T]=H(x),I=m.forwardRef((t,a)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:d,orientation:r="horizontal",dir:l,activationMode:b="automatic",...o}=t,c=$(l),[u,f]=K({prop:s,onChange:i,defaultProp:d??"",caller:x});return e.jsx(J,{scope:n,baseId:U(),value:u,onValueChange:f,orientation:r,dir:c,activationMode:b,children:e.jsx(g.div,{dir:c,"data-orientation":r,...o,ref:a})})});I.displayName=x;var P="TabsList",_=m.forwardRef((t,a)=>{const{__scopeTabs:n,loop:s=!0,...i}=t,d=T(P,n),r=N(n);return e.jsx(q,{asChild:!0,...r,orientation:d.orientation,dir:d.dir,loop:s,children:e.jsx(g.div,{role:"tablist","aria-orientation":d.orientation,...i,ref:a})})});_.displayName=P;var R="TabsTrigger",w=m.forwardRef((t,a)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...d}=t,r=T(R,n),l=N(n),b=E(r.baseId,s),o=F(r.baseId,s),c=s===r.value;return e.jsx(z,{asChild:!0,...l,focusable:!i,active:c,children:e.jsx(g.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":o,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:b,...d,ref:a,onMouseDown:h(t.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?r.onValueChange(s):u.preventDefault()}),onKeyDown:h(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&r.onValueChange(s)}),onFocus:h(t.onFocus,()=>{const u=r.activationMode!=="manual";!c&&!i&&u&&r.onValueChange(s)})})})});w.displayName=R;var M="TabsContent",k=m.forwardRef((t,a)=>{const{__scopeTabs:n,value:s,forceMount:i,children:d,...r}=t,l=T(M,n),b=E(l.baseId,s),o=F(l.baseId,s),c=s===l.value,u=m.useRef(c);return m.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(Q,{present:i||c,children:({present:f})=>e.jsx(g.div,{"data-state":c?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":b,hidden:!f,id:o,tabIndex:0,...r,ref:a,style:{...t.style,animationDuration:u.current?"0s":void 0},children:f&&d})})});k.displayName=M;function E(t,a){return`${t}-trigger-${a}`}function F(t,a){return`${t}-content-${a}`}var W=I,X=_,Z=w,ee=k;function te({className:t,...a}){return e.jsx(W,{"data-slot":"tabs",className:p("flex flex-col",t),...a})}function ae({className:t,children:a,...n}){return e.jsxs(X,{...n,"data-slot":"tabs-list",className:p("inline-flex w-fit items-center divide-x-[0.125rem] divide-fg text-fg",t),children:[a,e.jsx("div",{className:"h-full flex-1 border-b-[0.125rem]"})]})}function v({className:t,...a}){return e.jsx(Z,{"data-slot":"tabs-trigger",className:p("focus-visible:outline-ring text-foreground relative z-30 inline-flex items-center justify-center gap-1.5 px-2 py-0.5 pb-[0.25rem] text-xs whitespace-nowrap first:border-l-[0.125rem] last:border-r-[0.125rem] hover:cursor-pointer disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-bg data-[state=active]:text-fg [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","after:absolute after:bottom-0 after:h-0 after:w-full after:border-b-[0.125rem] after:border-b-fg after:content-[''] data-[state=active]:after:border-b-transparent",t),...a})}function j({className:t,...a}){return e.jsx(ee,{"data-slot":"tabs-content",className:p("flex-1 outline-none",t),...a})}const re=["album","single","appears_on","compilation"];function se(t){const{id:a}=t,[n,s]=m.useState("album"),{data:i=[],isLoading:d,hasNextPage:r,fetchNextPage:l}=L({queryKey:[y.artist.ALBUMS,n,a],queryFn:({pageParam:o})=>S.artists.albums(a,n,"US",50,o),initialPageParam:0,placeholderData:o=>o,getNextPageParam:o=>o.next?o.offset+50:void 0,select:o=>o.pages.flatMap(c=>c.items)}),b=o=>()=>s(o);return e.jsx(j,{value:"albums",children:e.jsx(Y,{loaded:i.length+1,loading:d,hasNextPage:r,fetchNextPage:l,children:({index:o,style:c})=>{if(o===0)return e.jsx("div",{className:"flex h-8 flex-row items-center gap-1",style:c,children:re.map(f=>e.jsx("button",{onClick:b(f),className:p("h-min rounded-full border-[0.0625rem] border-fg px-1.5 py-0.25 text-xs whitespace-nowrap text-fg capitalize hover:cursor-pointer",n===f&&"bg-fg text-bg"),children:f.replaceAll("_"," ")},f))});const u=i[o-1];return e.jsx(O,{album:u,style:c})}})})}function oe(t){const{id:a}=t,n=D(),{data:s=[],isLoading:i}=G({queryKey:[y.artist.TRACKS,a],queryFn:()=>S.artists.topTracks(a,"US"),select:r=>r.tracks}),d=r=>{s.length>0||n({uris:s.map(l=>l.uri),offset:r})};return e.jsx(A,{loading:i,asChild:!0,children:e.jsx(j,{value:"songs",children:s.map((r,l)=>e.jsx(V,{trackNumber:l+1,track:r,onClick:()=>d(l)},l))})})}function ne(t){const{id:a}=t;return e.jsx(A,{asChild:!0,className:"overflow-hidden pt-0",children:e.jsxs(te,{defaultValue:"songs",children:[e.jsxs(ae,{className:"w-full",children:[e.jsx(v,{value:"meta",children:"Meta"}),e.jsx(v,{value:"songs",children:"Top Songs"}),e.jsx(v,{value:"albums",children:"Albums"}),e.jsx(v,{value:"related",children:"Related"})]}),e.jsx(j,{value:"meta"}),e.jsx(oe,{id:a}),e.jsx(se,{id:a})]})})}const je=m.memo(ne);export{je as default};
