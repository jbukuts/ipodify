import{r as m,j as e,a as p,S as y,Q as A,s as S}from"./index-DfWu0XcN.js";import{u as G}from"./useQuery-Cj0VkjqC.js";import{u as L}from"./useInfiniteQuery-B8I5qTvi.js";import{u as V,T as D}from"./usePlaySong-CnFkfI_C.js";import{u as $,a as K,c as B,P as v,b as x}from"./smart-marquee-BcDRQkC3.js";import{u as U,c as C,R as q,I as z,P as Q}from"./context-menu-C80MbDdp.js";import{A as O}from"./album-item-CT2DFm9x.js";import{B as Y}from"./better-virtual-screen-mtlyGHmd.js";import"./useBaseQuery-DOTW683a.js";import"./use-saved-playlists-C1eySg40.js";import"./volume-C70KjAyU.js";var g="Tabs",[H,xe]=B(g,[C]),N=C(),[J,T]=H(g),I=m.forwardRef((t,a)=>{const{__scopeTabs:o,value:s,onValueChange:i,defaultValue:d,orientation:r="horizontal",dir:c,activationMode:b="automatic",...n}=t,l=$(c),[u,f]=K({prop:s,onChange:i,defaultProp:d??"",caller:g});return e.jsx(J,{scope:o,baseId:U(),value:u,onValueChange:f,orientation:r,dir:l,activationMode:b,children:e.jsx(v.div,{dir:l,"data-orientation":r,...n,ref:a})})});I.displayName=g;var P="TabsList",_=m.forwardRef((t,a)=>{const{__scopeTabs:o,loop:s=!0,...i}=t,d=T(P,o),r=N(o);return e.jsx(q,{asChild:!0,...r,orientation:d.orientation,dir:d.dir,loop:s,children:e.jsx(v.div,{role:"tablist","aria-orientation":d.orientation,...i,ref:a})})});_.displayName=P;var w="TabsTrigger",R=m.forwardRef((t,a)=>{const{__scopeTabs:o,value:s,disabled:i=!1,...d}=t,r=T(w,o),c=N(o),b=M(r.baseId,s),n=F(r.baseId,s),l=s===r.value;return e.jsx(z,{asChild:!0,...c,focusable:!i,active:l,children:e.jsx(v.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":n,"data-state":l?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:b,...d,ref:a,onMouseDown:x(t.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?r.onValueChange(s):u.preventDefault()}),onKeyDown:x(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&r.onValueChange(s)}),onFocus:x(t.onFocus,()=>{const u=r.activationMode!=="manual";!l&&!i&&u&&r.onValueChange(s)})})})});R.displayName=w;var k="TabsContent",E=m.forwardRef((t,a)=>{const{__scopeTabs:o,value:s,forceMount:i,children:d,...r}=t,c=T(k,o),b=M(c.baseId,s),n=F(c.baseId,s),l=s===c.value,u=m.useRef(l);return m.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(Q,{present:i||l,children:({present:f})=>e.jsx(v.div,{"data-state":l?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":b,hidden:!f,id:n,tabIndex:0,...r,ref:a,style:{...t.style,animationDuration:u.current?"0s":void 0},children:f&&d})})});E.displayName=k;function M(t,a){return`${t}-trigger-${a}`}function F(t,a){return`${t}-content-${a}`}var W=I,X=_,Z=R,ee=E;function te({className:t,...a}){return e.jsx(W,{"data-slot":"tabs",className:p("flex flex-col",t),...a})}function ae({className:t,children:a,...o}){return e.jsxs(X,{...o,"data-slot":"tabs-list",className:p("inline-flex w-fit items-center divide-x-[0.125rem] divide-fg text-fg",t),children:[a,e.jsx("div",{className:"h-full flex-1 border-b-[0.125rem]"})]})}function h({className:t,...a}){return e.jsx(Z,{"data-slot":"tabs-trigger",className:p("focus-visible:outline-ring text-foreground relative z-30 inline-flex items-center justify-center gap-1.5 px-2 py-0.5 pb-[0.25rem] text-xs whitespace-nowrap first:border-l-[0.125rem] last:border-r-[0.125rem] hover:cursor-pointer disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-bg data-[state=active]:text-fg [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","after:absolute after:bottom-0 after:h-0 after:w-full after:border-b-[0.125rem] after:border-b-fg after:content-[''] data-[state=active]:after:border-b-transparent",t),...a})}function j({className:t,...a}){return e.jsx(ee,{"data-slot":"tabs-content",className:p("flex-1 outline-none",t),...a})}const re=["album","single","appears_on","compilation"];function se(t){const{id:a}=t,[o,s]=m.useState("album"),{data:i=[],isLoading:d,hasNextPage:r,fetchNextPage:c}=L({queryKey:[A.artist.ALBUMS,o,a],queryFn:({pageParam:n})=>S.artists.albums(a,o,"US",50,n),initialPageParam:0,placeholderData:n=>n,getNextPageParam:n=>n.next?n.offset+50:void 0,select:n=>n.pages.flatMap(l=>l.items)}),b=n=>()=>s(n);return e.jsx(j,{value:"ablums",children:e.jsx(Y,{loaded:i.length+1,loading:d,hasNextPage:r,fetchNextPage:c,children:({index:n,style:l})=>{if(n===0)return e.jsx("div",{className:"flex h-8 flex-row items-center gap-1",style:l,children:re.map(f=>e.jsx("button",{onClick:b(f),className:p("h-min rounded-full border-[0.0625rem] border-fg px-1.5 py-0.25 text-xs whitespace-nowrap text-fg capitalize hover:cursor-pointer",o===f&&"bg-fg text-bg"),children:f.replaceAll("_"," ")},f))});const u=i[n-1];return e.jsx(O,{album:u,style:l})}})})}function ne(t){const{id:a}=t,o=V(),{data:s=[],isLoading:i}=G({queryKey:[A.artist.TRACKS,a],queryFn:()=>S.artists.topTracks(a,"US"),select:r=>r.tracks}),d=r=>{s.length>0||o({uris:s.map(c=>c.uri),offset:r})};return e.jsx(y,{loading:i,asChild:!0,children:e.jsx(j,{value:"tracks",children:s.map((r,c)=>e.jsx(D,{trackNumber:c+1,track:r,onClick:()=>d(c)},c))})})}function oe(t){const{id:a}=t;return e.jsx(y,{asChild:!0,className:"overflow-hidden pt-0",children:e.jsxs(te,{defaultValue:"tracks",children:[e.jsxs(ae,{className:"w-full",children:[e.jsx(h,{value:"tracks",children:"Top Songs"}),e.jsx(h,{value:"ablums",children:"Albums"}),e.jsx(h,{value:"about",children:"About"})]}),e.jsx(j,{value:"meta"}),e.jsx(ne,{id:a}),e.jsx(se,{id:a})]})})}const he=m.memo(oe);export{he as default};
