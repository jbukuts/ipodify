import{c as p,k as y,l as b,m as g,n as x,h as S,i as k,j as s,S as j,L as I,M as E,s as r}from"./index-DVXwI_y8.js";import{u as L}from"./useQuery-CcmjiuQ2.js";import{Q as c}from"./query-enum-CKM-M8gy.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],R=p("check",N);function Q(){const o=y(),l=b(),{activeDeviceId:n}=g(x(t=>{var e;return{activeDeviceId:(e=t.device)==null?void 0:e.id}})),d=S(),{data:a,isLoading:u,isFetching:i,refetch:f}=L({queryKey:[c.device.LIST],queryFn:()=>r.player.getAvailableDevices()}),{mutate:m,isPending:h}=k({mutationFn:async t=>{const{id:e}=t;if(!e)throw new Error("Device has no id");if(n!==e)return await l({device:t}),r.player.transferPlayback([e],!1)},onSettled:()=>{d.invalidateQueries({queryKey:[c.device.LIST]}),setTimeout(o,500)}});return s.jsxs(j,{loading:u,children:[a&&a.devices.length===0&&s.jsxs("div",{className:"flex size-full flex-col items-center justify-center gap-4 select-none",children:[s.jsx("p",{className:"text-fg",children:"No active devices found"}),s.jsxs("button",{disabled:i,className:"flex items-center gap-2 rounded-md border-[0.125rem] border-fg p-1.5 text-sm text-fg transition-colors hover:cursor-pointer hover:bg-fg hover:text-bg disabled:pointer-events-none disabled:opacity-50",onClick:()=>f(),children:[i?"REFRESHING":"REFRESH LIST"," ",i&&s.jsx(I,{className:"animate-spin"})]})]}),a&&a.devices.length>0&&a.devices.map(t=>{const{id:e,name:v}=t;if(e)return s.jsx(E,{icon:n===e?R:!1,onClick:()=>{h||m(t)},children:v},e)})]})}export{Q as default};
