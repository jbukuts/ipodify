import{r as d,j as c,g as _,a as z,d as fe,e as me,f as he,h as pe,b as ge,s as Se,S as W}from"./index-BnCywg3m.js";import{a as xe,c as ve,d as we,b as M,P as k,u as be,e as ye,B as H}from"./smart-marquee-BuAHgEhC.js";function q(e,[t,n]){return Math.min(n,Math.max(t,e))}function Pe(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var G=["PageUp","PageDown"],J=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Q={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},D="Slider",[L,Re,je]=we(D),[Z,We]=ve(D,[je]),[Ce,T]=Z(D),ee=d.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:l=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:f=0,defaultValue:p=[r],value:u,onValueChange:i=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:y,...v}=e,S=d.useRef(new Set),h=d.useRef(0),w=o==="horizontal"?Ee:Me,[x=[],N]=xe({prop:u,defaultProp:p,onChange:b=>{var C;(C=[...S.current][h.current])==null||C.focus(),i(b)}}),B=d.useRef(x);function V(b){const P=Ie(x,b);A(b,P)}function de(b){A(b,h.current)}function ue(){const b=B.current[h.current];x[h.current]!==b&&m(x)}function A(b,P,{commit:C}={commit:!1}){const Y=Ve(l),K=Ke(Math.round((b-r)/l)*l+r,Y),I=q(K,[r,s]);N((E=[])=>{const R=Ne(E,I,P);if(Be(R,f*l)){h.current=R.indexOf(I);const $=String(R)!==String(E);return $&&C&&m(R),$?R:E}else return E})}return c.jsx(Ce,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:h,thumbs:S.current,values:x,orientation:o,form:y,children:c.jsx(L.Provider,{scope:e.__scopeSlider,children:c.jsx(L.Slot,{scope:e.__scopeSlider,children:c.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:t,onPointerDown:M(v.onPointerDown,()=>{a||(B.current=x)}),min:r,max:s,inverted:g,onSlideStart:a?void 0:V,onSlideMove:a?void 0:de,onSlideEnd:a?void 0:ue,onHomeKeyDown:()=>!a&&A(r,0,{commit:!0}),onEndKeyDown:()=>!a&&A(s,x.length-1,{commit:!0}),onStepKeyDown:({event:b,direction:P})=>{if(!a){const K=G.includes(b.key)||b.shiftKey&&J.includes(b.key)?10:1,I=h.current,E=x[I],R=l*K*P;A(E+R,I,{commit:!0})}}})})})})});ee.displayName=D;var[te,ne]=Z(D,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ee=d.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:l,onSlideStart:o,onSlideMove:a,onSlideEnd:f,onStepKeyDown:p,...u}=e,[i,m]=d.useState(null),g=_(t,w=>m(w)),y=d.useRef(void 0),v=be(s),S=v==="ltr",h=S&&!l||!S&&l;function j(w){const x=y.current||i.getBoundingClientRect(),N=[0,x.width],V=F(N,h?[n,r]:[r,n]);return y.current=x,V(w-x.left)}return c.jsx(te,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:c.jsx(re,{dir:v,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const x=j(w.clientX);o==null||o(x)},onSlideMove:w=>{const x=j(w.clientX);a==null||a(x)},onSlideEnd:()=>{y.current=void 0,f==null||f()},onStepKeyDown:w=>{const N=Q[h?"from-left":"from-right"].includes(w.key);p==null||p({event:w,direction:N?-1:1})}})})}),Me=d.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:l,onSlideMove:o,onSlideEnd:a,onStepKeyDown:f,...p}=e,u=d.useRef(null),i=_(t,u),m=d.useRef(void 0),g=!s;function y(v){const S=m.current||u.current.getBoundingClientRect(),h=[0,S.height],w=F(h,g?[r,n]:[n,r]);return m.current=S,w(v-S.top)}return c.jsx(te,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:c.jsx(re,{"data-orientation":"vertical",...p,ref:i,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const S=y(v.clientY);l==null||l(S)},onSlideMove:v=>{const S=y(v.clientY);o==null||o(S)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:v=>{const h=Q[g?"from-bottom":"from-top"].includes(v.key);f==null||f({event:v,direction:h?-1:1})}})})}),re=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:l,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:f,...p}=e,u=T(D,n);return c.jsx(k.span,{...p,ref:t,onKeyDown:M(e.onKeyDown,i=>{i.key==="Home"?(o(i),i.preventDefault()):i.key==="End"?(a(i),i.preventDefault()):G.concat(J).includes(i.key)&&(f(i),i.preventDefault())}),onPointerDown:M(e.onPointerDown,i=>{const m=i.target;m.setPointerCapture(i.pointerId),i.preventDefault(),u.thumbs.has(m)?m.focus():r(i)}),onPointerMove:M(e.onPointerMove,i=>{i.target.hasPointerCapture(i.pointerId)&&s(i)}),onPointerUp:M(e.onPointerUp,i=>{const m=i.target;m.hasPointerCapture(i.pointerId)&&(m.releasePointerCapture(i.pointerId),l(i))})})}),oe="SliderTrack",se=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=T(oe,n);return c.jsx(k.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});se.displayName=oe;var O="SliderRange",ie=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=T(O,n),l=ne(O,n),o=d.useRef(null),a=_(t,o),f=s.values.length,p=s.values.map(m=>ce(m,s.min,s.max)),u=f>1?Math.min(...p):0,i=100-Math.max(...p);return c.jsx(k.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...e.style,[l.startEdge]:u+"%",[l.endEdge]:i+"%"}})});ie.displayName=O;var U="SliderThumb",ae=d.forwardRef((e,t)=>{const n=Re(e.__scopeSlider),[r,s]=d.useState(null),l=_(t,a=>s(a)),o=d.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return c.jsx(_e,{...e,ref:l,index:o})}),_e=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...l}=e,o=T(U,n),a=ne(U,n),[f,p]=d.useState(null),u=_(t,j=>p(j)),i=f?o.form||!!f.closest("form"):!0,m=ye(f),g=o.values[r],y=g===void 0?0:ce(g,o.min,o.max),v=Ae(r,o.values.length),S=m==null?void 0:m[a.size],h=S?ke(S,y,a.direction):0;return d.useEffect(()=>{if(f)return o.thumbs.add(f),()=>{o.thumbs.delete(f)}},[f,o.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${h}px)`},children:[c.jsx(L.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(k.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...l,ref:u,style:g===void 0?{display:"none"}:e.style,onFocus:M(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),i&&c.jsx(le,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});ae.displayName=U;var De="RadioBubbleInput",le=d.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=d.useRef(null),l=_(s,r),o=Pe(t);return d.useEffect(()=>{const a=s.current;if(!a)return;const f=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(f,"value").set;if(o!==t&&u){const i=new Event("input",{bubbles:!0});u.call(a,t),a.dispatchEvent(i)}},[o,t]),c.jsx(k.input,{style:{display:"none"},...n,ref:l,defaultValue:t})});le.displayName=De;function Ne(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,l)=>s-l)}function ce(e,t,n){const l=100/(n-t)*(e-t);return q(l,[0,100])}function Ae(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ie(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function ke(e,t,n){const r=e/2,l=F([0,50],[0,r]);return(r-l(t)*n)*n}function Te(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Be(e,t){if(t>0){const n=Te(e);return Math.min(...n)>=t}return!0}function F(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Ve(e){return(String(e).split(".")[1]||"").length}function Ke(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var ze=ee,He=se,Le=ie,Oe=ae;function Ue({className:e,defaultValue:t,value:n,min:r=0,max:s=100,...l}){const o=d.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,s],[n,t,r,s]);return c.jsxs(ze,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:s,className:z("group relative flex w-full touch-none items-center select-none hover:cursor-pointer data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[c.jsx(He,{"data-slot":"slider-track",className:z("relative grow overflow-hidden rounded-full border-[0.125rem] bg-bg group-hover:rounded-none data-[orientation=horizontal]:h-5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:c.jsx(Le,{"data-slot":"slider-range",className:z("absolute bg-fg group-hover:bg-fg/50 data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(a,f)=>c.jsx(Oe,{"data-slot":"slider-thumb",className:"block size-3 shrink-0 rotate-45 bg-fg opacity-0 shadow-sm group-hover:opacity-100 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},f))]})}function X(e){let t=Math.floor(e/1e3);const n=Math.floor(t/3600),r=Math.floor(t%3600/60);return t=t%60,[n>0?String(n).padStart(2,"0"):void 0,String(r).padStart(2,"0"),String(t).padStart(2,"0")].filter(s=>!!s).join(":")}function Fe(){const{item:e,progress:t,isPlaying:n,refetch:r}=fe(me(({item:u,progress:i,isPlaying:m,refetch:g})=>({progress:i,item:u,isPlaying:m,refetch:g}))),s=he(),[l,o]=d.useState(t);pe(()=>{o(u=>{const i=u+1e3;return e&&i>=e.duration_ms?(r(),0):i})},n?1e3:null),d.useEffect(()=>r(),[]),d.useEffect(()=>o(t),[t]);const{mutate:a}=ge({mutationFn:u=>Se.player.seekToPosition(u),onSettled:()=>{setTimeout(r,500)}}),f=d.useMemo(()=>e&&"artists"in e?e.artists.flatMap(u=>[c.jsx("span",{role:"button",className:"hover:cursor-pointer hover:underline",onClick:s(u.name,"Artist",{id:u.id}),children:u.name},u.id),","]).slice(0,-1):[],[e,s]);d.useEffect(()=>{console.log("sdfsfsfsdf")},[s]);const p=()=>{!e||!("artists"in e)||window.open(`https://www.google.com/search?q=${encodeURI(e.name+" "+e.artists[0].name+" lyrics")}`)};return e===null?c.jsx(W,{className:"flex flex-col items-center justify-center text-fg",children:"Nothing is currently playing"}):c.jsxs(W,{className:"flex flex-col items-center justify-between gap-y-2 text-fg",children:[c.jsxs("div",{className:"flex w-full grow flex-col items-center justify-center gap-y-2 overflow-clip",children:[c.jsx(H,{wrapperClassName:"w-full",className:"text-center",autoPlay:!0,children:c.jsx("span",{className:"hover:cursor-pointer hover:underline",onClick:p,children:e.name})}),"album"in e&&c.jsx(H,{autoPlay:!0,wrapperClassName:"w-full",className:"text-center",children:c.jsx("span",{className:"hover:cursor-pointer hover:underline",onClick:s(e.album.name,"Album",{id:e.album.id}),children:e.album.name})}),"artists"in e&&c.jsx(H,{autoPlay:!0,wrapperClassName:"w-full",className:"text-center",children:f})]}),c.jsx(Ue,{onMouseDown:()=>console.log("down"),onValueChange:u=>o(u[0]),onValueCommit:u=>a(u[0]),value:[l],max:e==null?void 0:e.duration_ms,min:0,className:"w-[95%]"}),c.jsxs("div",{className:"mb-3 flex w-[95%] justify-between",children:[c.jsx("p",{children:X(l)}),c.jsxs("p",{children:["-",X(((e==null?void 0:e.duration_ms)??0)-l)]})]})]})}const Xe=d.memo(Fe);export{Xe as default};
