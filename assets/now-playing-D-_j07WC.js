import{r as t,j as a,R as N,g as f,T as k,p as P,q as C,k as A,m as S,n as T,o as M,v as R,i as _,s as z,S as p,w as b}from"./index-HwXstorI.js";import{B as h}from"./smart-marquee-DZvyZ5SJ.js";function E({className:o,defaultValue:e,value:r,min:l=0,max:n=100,...i}){const c=t.useMemo(()=>Array.isArray(r)?r:Array.isArray(e)?e:[l,n],[r,e,l,n]);return a.jsxs(N,{"data-slot":"slider",defaultValue:e,value:r,min:l,max:n,className:f("group relative flex w-full touch-none items-center select-none hover:cursor-pointer data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",o),...i,children:[a.jsx(k,{"data-slot":"slider-track",className:f("relative grow overflow-hidden rounded-full border-[0.125rem] bg-bg group-hover:rounded-none data-[orientation=horizontal]:h-5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:a.jsx(P,{"data-slot":"slider-range",className:f("absolute bg-fg group-hover:bg-fg/50 data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(u,m)=>a.jsx(C,{"data-slot":"slider-thumb",className:"block size-3 shrink-0 rotate-45 bg-fg opacity-0 shadow-sm group-hover:opacity-100 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},m))]})}function I(){const o=A(),{item:e,progress:r,isPlaying:l}=S(T(({item:s,progress:d,isPlaying:j})=>({progress:d,item:s,isPlaying:j}))),n=M(),[i,c]=t.useState(r),u=t.useRef(!1);R(()=>{c(s=>{const d=s+1e3;return e&&d>=e.duration_ms?(o(),0):d})},l?1e3:null),t.useEffect(()=>{o()},[]),t.useEffect(()=>{u.current||c(r)},[r]);const{mutate:m}=_({mutationFn:s=>z.player.seekToPosition(s),onSettled:()=>{setTimeout(o,500)}}),x=t.useCallback(()=>{!e||!("artists"in e)||window.open(`https://www.google.com/search?q=${encodeURI(e.name+" "+e.artists[0].name+" lyrics")}`)},[e]),g=t.useCallback(()=>{!e||!("album"in e)||n(e.album.name,"Album",{id:e.album.id})()},[e,n]),w=t.useMemo(()=>a.jsx("span",{className:"hover:cursor-pointer hover:underline",onClick:x,children:e==null?void 0:e.name}),[e]),y=t.useMemo(()=>e&&"album"in e&&a.jsx("span",{className:"hover:cursor-pointer hover:underline",onClick:g,children:e.album.name}),[e,g]),v=t.useMemo(()=>e&&"artists"in e?e.artists.flatMap(s=>[a.jsx("span",{role:"button",className:"hover:cursor-pointer hover:underline",onClick:n(s.name,"Artist",{id:s.id}),children:s.name},s.id),","]).slice(0,-1):[],[e,n]);return e===null?a.jsx(p,{className:"flex flex-col items-center justify-center text-fg",children:"Nothing is currently playing"}):a.jsxs(p,{className:"flex flex-col items-center justify-between gap-y-2 text-fg",children:[a.jsxs("div",{className:"flex w-full grow flex-col items-center justify-center gap-y-2 overflow-clip",children:[a.jsx(h,{wrapperClassName:"w-full",className:"text-center",autoPlay:!0,children:w}),"album"in e&&a.jsx(h,{autoPlay:!0,wrapperClassName:"w-full",className:"text-center",children:y}),"artists"in e&&a.jsx(h,{autoPlay:!0,wrapperClassName:"w-full",className:"text-center",children:v})]}),a.jsx(E,{onPointerDown:()=>u.current=!0,onPointerUp:()=>u.current=!1,onValueChange:s=>c(s[0]),onValueCommit:s=>m(s[0]),value:[i],max:e==null?void 0:e.duration_ms,min:0,className:"w-[95%]"}),a.jsxs("div",{className:"mb-3 flex w-[95%] justify-between",children:[a.jsx("p",{children:b(i)}),a.jsxs("p",{children:["-",b(((e==null?void 0:e.duration_ms)??0)-i)]})]})]})}const D=t.memo(I);export{D as default};
