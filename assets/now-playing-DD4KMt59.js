import{r as i,j as t,R as v,g as m,T as b,n as j,o as N,k as S,l as k,m as P,p as A,i as C,s as M,S as p}from"./index-CySbD327.js";import{B as h}from"./smart-marquee-C3eaP0iG.js";function T({className:e,defaultValue:a,value:s,min:n=0,max:o=100,...l}){const c=i.useMemo(()=>Array.isArray(s)?s:Array.isArray(a)?a:[n,o],[s,a,n,o]);return t.jsxs(v,{"data-slot":"slider",defaultValue:a,value:s,min:n,max:o,className:m("group relative flex w-full touch-none items-center select-none hover:cursor-pointer data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[t.jsx(b,{"data-slot":"slider-track",className:m("relative grow overflow-hidden rounded-full border-[0.125rem] bg-bg group-hover:rounded-none data-[orientation=horizontal]:h-5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:t.jsx(j,{"data-slot":"slider-range",className:m("absolute bg-fg group-hover:bg-fg/50 data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(f,d)=>t.jsx(N,{"data-slot":"slider-thumb",className:"block size-3 shrink-0 rotate-45 bg-fg opacity-0 shadow-sm group-hover:opacity-100 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}function g(e){let a=Math.floor(e/1e3);const s=Math.floor(a/3600),n=Math.floor(a%3600/60);return a=a%60,[s>0?String(s).padStart(2,"0"):void 0,String(n).padStart(2,"0"),String(a).padStart(2,"0")].filter(o=>!!o).join(":")}function R(){const{item:e,progress:a,isPlaying:s,refetch:n}=S(k(({item:r,progress:u,isPlaying:w,refetch:y})=>({progress:u,item:r,isPlaying:w,refetch:y}))),o=P(),[l,c]=i.useState(a);A(()=>{c(r=>{const u=r+1e3;return e&&u>=e.duration_ms?(n(),0):u})},s?1e3:null),i.useEffect(()=>{n()},[]),i.useEffect(()=>c(a),[a]);const{mutate:f}=C({mutationFn:r=>M.player.seekToPosition(r),onSettled:()=>{setTimeout(n,500)}}),d=i.useMemo(()=>e&&"artists"in e?e.artists.flatMap(r=>[t.jsx("span",{role:"button",className:"hover:cursor-pointer hover:underline",onClick:o(r.name,"Artist",{id:r.id}),children:r.name},r.id),","]).slice(0,-1):[],[e,o]),x=()=>{!e||!("artists"in e)||window.open(`https://www.google.com/search?q=${encodeURI(e.name+" "+e.artists[0].name+" lyrics")}`)};return e===null?t.jsx(p,{className:"flex flex-col items-center justify-center text-fg",children:"Nothing is currently playing"}):t.jsxs(p,{className:"flex flex-col items-center justify-between gap-y-2 text-fg",children:[t.jsxs("div",{className:"flex w-full grow flex-col items-center justify-center gap-y-2 overflow-clip",children:[t.jsx(h,{wrapperClassName:"w-full",className:"text-center",autoPlay:!0,children:t.jsx("span",{className:"hover:cursor-pointer hover:underline",onClick:x,children:e.name})}),"album"in e&&t.jsx(h,{autoPlay:!0,wrapperClassName:"w-full",className:"text-center",children:t.jsx("span",{className:"hover:cursor-pointer hover:underline",onClick:o(e.album.name,"Album",{id:e.album.id}),children:e.album.name})}),"artists"in e&&t.jsx(h,{autoPlay:!0,wrapperClassName:"w-full",className:"text-center",children:d})]}),t.jsx(T,{onValueChange:r=>c(r[0]),onValueCommit:r=>f(r[0]),value:[l],max:e==null?void 0:e.duration_ms,min:0,className:"w-[95%]"}),t.jsxs("div",{className:"mb-3 flex w-[95%] justify-between",children:[t.jsx("p",{children:g(l)}),t.jsxs("p",{children:["-",g(((e==null?void 0:e.duration_ms)??0)-l)]})]})]})}const E=i.memo(R);export{E as default};
