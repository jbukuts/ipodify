import{j as m,M as g,s as f}from"./index-BYKxCBU6.js";import{u as p}from"./useQuery-BQgvE_25.js";import{u as k}from"./useInfiniteQuery-FzzryE4t.js";import{B as x}from"./better-virtual-screen-CMPaAalF.js";import{T as P}from"./track-item-DTYmOvLE.js";import{u as h}from"./usePlaySong-ChZmzuRF.js";import"./useBaseQuery-BSBvAQJV.js";import"./screen-lu_8eyZ8.js";import"./context-menu-CjbnLnSF.js";import"./smart-marquee-C3Frd3Kl.js";import"./use-saved-playlists-CO6DRgVB.js";function q(a){const{data:t,isLoading:n}=p({queryKey:["playlist",a],queryFn:()=>f.playlists.getPlaylist(a,"US")}),{data:s,fetchNextPage:o,hasNextPage:l}=k({queryKey:["playlist-tracks",a],queryFn:({pageParam:e})=>f.playlists.getPlaylistItems(a,"US",void 0,50,e),initialPageParam:100,getNextPageParam:e=>e.next?e.offset+50:void 0,enabled:t!==void 0&&t.tracks.next!==null}),{data:i}=p({queryKey:["profile"],queryFn:()=>f.currentUser.profile()}),c=[...t?t.tracks.items:[],...s?s.pages.flatMap(e=>e.items):[]];return{canModify:(i==null?void 0:i.id)===(t==null?void 0:t.owner.id)||(t==null?void 0:t.collaborative),playlist:t,tracks:c,isLoading:n,fetchNextPage:o,hasNextPage:l}}function B(a){const{id:t}=a,n=h(),{tracks:s,playlist:o,isLoading:l,hasNextPage:i,fetchNextPage:c,canModify:d}=q(t),e=r=>{!o||s.length===0||n({contextUri:o.uri,offset:r.linked_from?r.linked_from.uri:r.uri})};return m.jsx(x,{hasNextPage:i,loading:l,loaded:s.length,fetchNextPage:c,children:({index:r,style:y})=>{const{track:u}=s[r];return u===null?m.jsxs(g,{style:y,disabled:!0,icon:!1,children:[r+1,"."]}):m.jsx(P,{playlistId:d?t:void 0,track:u,trackNumber:r+1,style:y,onClick:()=>e(u)})}})}export{B as default};
