import{j as m,M as g,s as y}from"./index-DVXwI_y8.js";import{u as P}from"./useQuery-CcmjiuQ2.js";import{u as k}from"./useInfiniteQuery-CRXj1fr8.js";import{B as x}from"./better-virtual-screen-Dt27MRQ2.js";import{T as h}from"./track-item-CtzFit2U.js";import{u as S}from"./usePlaySong-Bi_xQp_B.js";import{Q as p}from"./query-enum-CKM-M8gy.js";import{u as T}from"./use-saved-playlists-DkwmCiDb.js";import"./context-menu-CSBCy0iF.js";import"./smart-marquee-CiG95ogH.js";function M(s){const{data:t,isLoading:n}=P({queryKey:[p.playlist.GET,s],queryFn:()=>y.playlists.getPlaylist(s,"US")}),{data:r,fetchNextPage:i,hasNextPage:l}=k({queryKey:[p.playlist.TRACKS,s],queryFn:({pageParam:e})=>y.playlists.getPlaylistItems(s,"US",void 0,50,e),initialPageParam:100,getNextPageParam:e=>e.next?e.offset+50:void 0,enabled:t!==void 0&&t.tracks.next!==null}),{data:o}=T(),u=[...t?t.tracks.items:[],...r?r.pages.flatMap(e=>e.items):[]];return{canModify:(o==null?void 0:o.id)===(t==null?void 0:t.owner.id)||(t==null?void 0:t.collaborative),playlist:t,tracks:u,isLoading:n,fetchNextPage:i,hasNextPage:l}}function C(s){const{id:t}=s,n=S(),{tracks:r,playlist:i,isLoading:l,hasNextPage:o,fetchNextPage:u,canModify:f}=M(t),e=a=>{!i||r.length===0||n({track:a,contextUri:i.uri,offset:a.linked_from?a.linked_from.uri:a.uri})};return m.jsx(x,{hasNextPage:o,loading:l,loaded:r.length,fetchNextPage:u,children:({index:a,style:d})=>{const{track:c}=r[a];return c===null?m.jsxs(g,{style:d,disabled:!0,icon:!1,children:[a+1,"."]}):m.jsx(h,{playlistId:f?t:void 0,track:c,trackNumber:a+1,style:d,onClick:()=>e(c)})}})}export{C as default};
