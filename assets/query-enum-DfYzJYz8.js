import{r as n,$ as L,h as D,a0 as w,a1 as S,a2 as A}from"./index-zkImxG3m.js";var g=n.createContext(!1),k=()=>n.useContext(g);g.Provider;function B(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var V=n.createContext(B()),q=()=>n.useContext(V),O=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},M=e=>{n.useEffect(()=>{e.clearReset()},[e])},U=({result:e,errorResetBoundary:t,throwOnError:i,query:s,suspense:u})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(u&&e.data===void 0||L(i,[e.error,s])),Y=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...s)=>t(i(...s)):t(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},F=(e,t)=>e.isLoading&&e.isFetching&&!t,H=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,f=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function G(e,t,i){var _,R,E,h,v;const s=k(),u=q(),c=D(),r=c.defaultQueryOptions(e);(R=(_=c.getDefaultOptions().queries)==null?void 0:_._experimental_beforeQuery)==null||R.call(_,r),r._optimisticResults=s?"isRestoring":"optimistic",Y(r),O(r,u),M(u);const I=!c.getQueryCache().get(r.queryHash),[a]=n.useState(()=>new t(c,r)),o=a.getOptimisticResult(r),p=!s&&e.subscribed!==!1;if(n.useSyncExternalStore(n.useCallback(l=>{const Q=p?a.subscribe(w.batchCalls(l)):S;return a.updateResult(),Q},[a,p]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),n.useEffect(()=>{a.setOptions(r)},[r,a]),H(r,o))throw f(r,a,u);if(U({result:o,errorResetBoundary:u,throwOnError:r.throwOnError,query:c.getQueryCache().get(r.queryHash),suspense:r.suspense}))throw o.error;if((h=(E=c.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||h.call(E,r,o),r.experimental_prefetchInRender&&!A&&F(o,s)){const l=I?f(r,a,u):(v=c.getQueryCache().get(r.queryHash))==null?void 0:v.promise;l==null||l.catch(S).finally(()=>{a.updateResult()})}return r.notifyOnChangeProps?o:a.trackResult(o)}var m=(e=>(e.SAVED_LIST="track_saved",e.IS_SAVED="track_is_saved",e))(m||{}),C=(e=>(e.GET="ablum",e.TRACKS="album_tracks",e.SAVED_LIST="album_saved",e.IS_SAVED="album_is_saved",e))(C||{}),T=(e=>(e.TRACKS="artist_tracks",e.ALBUMS="artist_albums",e.SAVED_LIST="artist_saved",e.IS_SAVED="artist_is_saved",e.RELATED="artist_related",e.ABOUT="artist_about",e))(T||{}),y=(e=>(e.GET="playlist",e.TRACKS="playlist_tracks",e.SAVED_LIST="playlist_saved",e))(y||{}),b=(e=>(e.LIST="device_list",e))(b||{}),x=(e=>(e.PROFILE="user_profile",e))(x||{}),d=(e=>(e.QUEUE="player_queue",e.RECENTLY_PLAYED="player_recently_played",e.PLAYBACK_STATE="player_playback_state",e))(d||{});const N={track:m,album:C,artist:T,playlist:y,user:x,player:d,device:b};export{N as Q,G as u};
