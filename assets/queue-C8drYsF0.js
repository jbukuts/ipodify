import{d as y,e as f,Q as g,r as i,j as l,S,s as h}from"./index-BnCywg3m.js";import{u as x}from"./useQuery-TCZOzByp.js";import{u as d}from"./usePlaySong-kuD2e1pz.js";import{T as k}from"./track-item-aLc_RiGl.js";import"./useBaseQuery-DwQ8rkT2.js";import"./context-menu-CjuX7Q4v.js";import"./smart-marquee-BuAHgEhC.js";import"./use-saved-playlists-CvSMI-Z0.js";import"./useInfiniteQuery-EJBRyPDZ.js";function T(){const n=d(),s=y(f(r=>{var e;return(e=r.context)==null?void 0:e.uri})),{data:t,isFetching:c}=x({queryKey:[g.player.QUEUE],initialData:{queue:[],currently_playing:null},queryFn:()=>h.player.getUsersQueue()}),a=i.useMemo(()=>[...t.currently_playing?[t.currently_playing]:[],...t.queue],[t]),m=i.useCallback((r,e)=>{if(s)return n({contextUri:s,offset:r.uri});const o=a.slice(Math.max(e-5,0),Math.min(e+5,a.length-1)).map(u=>u.uri),p=o.findIndex(u=>r.uri===u);n({uris:o,offset:p})},[n,s,a]);return l.jsx(S,{loading:c&&t.currently_playing===null,children:a.map((r,e)=>l.jsx(k,{trackNumber:e+1,track:r,onClick:()=>m(r,e)},e))})}export{T as default};
