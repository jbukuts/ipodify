import{j as l,S as m,r as u,s as p}from"./index-DVXwI_y8.js";import{u as f}from"./useQuery-CcmjiuQ2.js";import{T as y}from"./track-item-CtzFit2U.js";import{u as d}from"./usePlaySong-Bi_xQp_B.js";import{Q as g}from"./query-enum-CKM-M8gy.js";import"./context-menu-CSBCy0iF.js";import"./smart-marquee-CiG95ogH.js";import"./use-saved-playlists-DkwmCiDb.js";import"./useInfiniteQuery-CRXj1fr8.js";function k(c){const{timestamp:a=Date.now(),duplicates:o=!1}=c??{},{data:n,isLoading:r}=f({queryKey:[g.player.RECENTLY_PLAYED],queryFn:()=>p.player.getRecentlyPlayedTracks(50,{type:"before",timestamp:a}),select:t=>t.items});return{tracks:u.useMemo(()=>{const t=n||[];if(o||t.length===0)return t;const i=[t[0]];for(let e=1;e<t.length;e++)t[e].track.id!==t[e-1].track.id&&i.push(t[e]);return i},[n,o]),isLoading:r}}function Y(){const c=d(),{tracks:a,isLoading:o}=k({duplicates:!1}),n=(r,s)=>{const t=a.slice(Math.max(s-5,0),Math.min(s+5,a.length-1)).map(e=>e.track.uri),i=t.findIndex(e=>r.uri===e);c({track:r,uris:t,offset:i})};return l.jsx(m,{loading:o,children:a.map(({track:r},s)=>l.jsx(y,{trackNumber:s+1,track:r,onClick:()=>n(r,s)},s))})}export{Y as default};
