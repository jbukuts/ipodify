import{j as m,Q as l,r as p,s as u}from"./index-BrIY1wjM.js";import{u as f}from"./useQuery-CbMM-AXE.js";import{S as y}from"./screen-B77F_OFO.js";import{T as d}from"./track-item-Dy-h_lP7.js";import{u as g}from"./usePlaySong-C0_KbYFq.js";import"./useBaseQuery-BM-W7Nb7.js";import"./context-menu-NTk8TyTC.js";import"./smart-marquee-BEhkT9_T.js";import"./use-saved-playlists-D_D06GFb.js";import"./useInfiniteQuery-B3cygYC7.js";function k(i){const{timestamp:a=Date.now(),duplicates:n=!1}=i??{},{data:o,...s}=f({queryKey:[l.player.RECENTLY_PLAYED],queryFn:()=>u.player.getRecentlyPlayedTracks(50,{type:"before",timestamp:a}),select:t=>t.items});return{tracks:p.useMemo(()=>{const t=o||[];if(n||t.length===0)return t;const c=[t[0]];for(let e=1;e<t.length;e++)t[e].track.id!==t[e-1].track.id&&c.push(t[e]);return c},[o,n]),...s}}function M(){const i=g(),{tracks:a,isLoading:n}=k({duplicates:!1}),o=(s,r)=>{const t=a.slice(Math.max(r-5,0),Math.min(r+5,a.length-1)).map(e=>e.track.uri),c=t.findIndex(e=>s.uri===e);i({uris:t,offset:c})};return m.jsx(y,{loading:n,children:a.map(({track:s},r)=>m.jsx(d,{trackNumber:r+1,track:s,onClick:()=>o(s,r)},r))})}export{M as default};
