import{j as l,r as m,s as p}from"./index-f1I_60Wl.js";import{u}from"./useQuery-CXSgYr8k.js";import{S as f}from"./screen-BgKbOw0u.js";import{T as y}from"./track-item-QKXQug1l.js";import{u as d}from"./usePlaySong-B-sj921G.js";import"./useBaseQuery-C7iLOGfG.js";import"./context-menu-C3rLmken.js";import"./smart-marquee-CItSSMHC.js";import"./use-saved-playlists-Dm7V3yRX.js";import"./useInfiniteQuery-DX5Z-ztU.js";function g(i){const{timestamp:a=Date.now(),duplicates:o=!1}=i??{},{data:n,...s}=u({queryKey:["recently_played"],queryFn:()=>p.player.getRecentlyPlayedTracks(50,{type:"before",timestamp:a}),select:t=>t.items});return{tracks:m.useMemo(()=>{const t=n||[];if(o||t.length===0)return t;const c=[t[0]];for(let e=1;e<t.length;e++)t[e].track.id!==t[e-1].track.id&&c.push(t[e]);return c},[n,o]),...s}}function q(){const i=d(),{tracks:a,isLoading:o}=g({duplicates:!1}),n=(s,r)=>{const t=a.slice(Math.max(r-5,0),Math.min(r+5,a.length-1)).map(e=>e.track.uri),c=t.findIndex(e=>s.uri===e);i({uris:t,offset:c})};return l.jsx(f,{loading:o,children:a.map(({track:s},r)=>l.jsx(y,{trackNumber:r+1,track:s,onClick:()=>n(s,r)},r))})}export{q as default};
