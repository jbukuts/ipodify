import{r as m,j as i,Q as l,s as p}from"./index-B75R5Hr1.js";import{u as d}from"./useInfiniteQuery-DhOLd-f1.js";import{B as g}from"./better-virtual-screen-DqUdPLmx.js";import{T as S}from"./track-item-C9-lmWeR.js";import{u as x}from"./usePlaySong-ts3unKNX.js";import"./useBaseQuery-DJ_Q3dBW.js";import"./context-menu-BXBTNX47.js";import"./smart-marquee-BRtM91Lt.js";import"./use-saved-playlists-CMNCMzxs.js";import"./useQuery-CMlNIQOV.js";function T(){const{data:r,...a}=d({queryKey:[l.track.SAVED_LIST],initialPageParam:0,queryFn:({pageParam:t})=>p.currentUser.tracks.savedTracks(50,t),getNextPageParam:t=>t.next?t.offset+50:void 0});return{tracks:m.useMemo(()=>r?r.pages.flatMap(t=>t.items):[],[r]),...a}}function Q(){const r=x(),{tracks:a,hasNextPage:c,isLoading:t,fetchNextPage:u}=T(),k=m.useCallback((e,s)=>{const n=a.slice(Math.max(s-10,0),s+10).map(o=>o.track.uri),f=n.findIndex(o=>e.uri===o);r({uris:n,offset:f})},[a,r]);return i.jsx(g,{hasNextPage:c,loading:t,loaded:a.length,fetchNextPage:u,children:({index:e,style:s})=>i.jsx(S,{isLiked:!0,onClick:()=>k(a[e].track,e),track:a[e].track,trackNumber:e+1,style:s})})}export{Q as default};
