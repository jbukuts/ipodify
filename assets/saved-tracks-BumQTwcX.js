import{s as p,r as f,j as u}from"./index-zkImxG3m.js";import{B as d}from"./better-virtual-screen-DcI-7b1B.js";import{T as k}from"./track-item-B8-7GquB.js";import{u as g}from"./usePlaySong-D4EF1Lxk.js";import{Q as x}from"./query-enum-DfYzJYz8.js";import{u as S}from"./useInfiniteQuery-BkxfwnhH.js";import"./context-menu-t1MoUkal.js";import"./smart-marquee-4jliwKgy.js";import"./use-saved-playlists-DgSTlIQN.js";import"./useQuery-BBn5-uPB.js";function P(){const{data:s=[],hasNextPage:a,isLoading:n,fetchNextPage:i}=S({queryKey:[x.track.SAVED_LIST],initialPageParam:0,queryFn:({pageParam:t})=>p.currentUser.tracks.savedTracks(50,t),getNextPageParam:t=>t.next?t.offset+50:void 0,select:({pages:t})=>t.flatMap(c=>c.items)});return{tracks:s,hasNextPage:a,isLoading:n,fetchNextPage:i}}function h(){const s=g(),{tracks:a,hasNextPage:n,isLoading:i,fetchNextPage:t}=P(),c=f.useCallback((r,o)=>{const e=a.slice(Math.max(o-10,0),o+10).map(m=>m.track.uri),l=e.findIndex(m=>r.uri===m);s({track:r,uris:e,offset:l})},[a,s]);return u.jsx(d,{hasNextPage:n,loading:i,loaded:a.length,fetchNextPage:t,children:({index:r,style:o})=>{const{track:e}=a[r];return u.jsx(k,{isLiked:!0,onClick:()=>c(e,r),track:e,trackNumber:r+1,style:o})}})}const q=f.memo(h);export{q as default};
