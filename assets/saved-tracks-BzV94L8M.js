import{s as d,r as f,j as u}from"./index-C9PgoutN.js";import{B as k}from"./better-virtual-screen-CGeEpxAu.js";import{T as p}from"./track-item-XZ71FpfM.js";import{u as g}from"./usePlaySong-CfG6Egy9.js";import{Q as x}from"./query-enum-C5aGOuRN.js";import{u as S}from"./useInfiniteQuery-ggimgVtN.js";import"./context-menu-t-PSiTGx.js";import"./smart-marquee-LBXNHBv0.js";import"./use-saved-playlists-BO0jZMFY.js";function P(){const{data:s=[],hasNextPage:a,isLoading:n,fetchNextPage:c}=S({queryKey:[x.track.SAVED_LIST],initialPageParam:0,queryFn:({pageParam:t})=>d.currentUser.tracks.savedTracks(50,t),getNextPageParam:t=>t.next?t.offset+50:void 0,select:({pages:t})=>t.flatMap(i=>i.items)});return{tracks:s,hasNextPage:a,isLoading:n,fetchNextPage:c}}function h(){const s=g(),{tracks:a,hasNextPage:n,isLoading:c,fetchNextPage:t}=P(),i=f.useCallback((e,o)=>{const r=a.slice(Math.max(o-10,0),o+10).map(m=>m.track.uri),l=r.findIndex(m=>e.uri===m);s({track:e,uris:r,offset:l})},[a,s]);return u.jsx(k,{hasNextPage:n,loading:c,loaded:a.length,fetchNextPage:t,children:({index:e,style:o})=>{const{track:r}=a[e];return u.jsx(p,{isLiked:!0,onClick:()=>i(r,e),track:r,trackNumber:e+1,style:o})}})}const b=f.memo(h);export{b as default};
